{% extends 'layout.html.twig' %}

{% block page_content %} 
    <div class="page-content">        
        <div class="row">
            <div class="col-xs-12">


                <div class="navbar navbar-default" id="navbar">
                    <script type="text/javascript">
                        try {
                            ace.settings.check('navbar', 'fixed')
                        } catch (e) {
                        }
                    </script>


                    <div class="row-fluid">
                        <div class="span12">
                            <div class="widget-box">
                                <div class="widget-header widget-header-blue widget-header-flat">
                                    <h4 class="lighter">Fazer consulta</h4>											
                                </div>

                                <div class="widget-body">
                                    <div class="widget-main">
                                       {# <div id="fuelux-wizard" class="row-fluid" data-target="#step-container">
                                            <ul class="wizard-steps">
                                                <li data-target="#step1" class="active">
                                                    <span class="step">1</span>
                                                    <span class="title">Dados Gerais</span>
                                                </li>

                                                <li data-target="#step2">
                                                    <span class="step">2</span>
                                                    <span class="title">Gravidez e Maternidade</span>
                                                </li>

                                                <li data-target="#step3">
                                                    <span class="step">3</span>
                                                    <span class="title">Dados Responsavel</span>
                                                </li>

                                                <li data-target="#step4">
                                                    <span class="step">4</span>
                                                    <span class="title">Problemas de saude</span>
                                                </li>
                                                
                                                <li data-target="#step5">
                                                    <span class="step">5</span>
                                                    <span class="title">Cuidados</span>
                                                </li>
                                            </ul>
                                        </div>#}

                                        <hr /> 
                                        <div class="step-content row-fluid position-relative" id="step-container">
                                            <form class="form-horizontal" id="sample-form">
                                                
                                                   <!-- <h4 class="lighter block green">Registre os dados principais do paciente</h4> -->

                                                    
                                                   <div class="form-group">
                                                       <label class="col-sm-3 control-label"> Nome </label>
                                                       <input type="text" value={{paciente.nome}} id="form-input-readonly" class="col-xs-10 col-sm-5" readonly="">
                                                   </div>
                                                        
                                                   <div class="form-group">
                                                        {#{{ form_row(formulario.nome) }}#}

                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.data)}} </label>
                                                        <div class="input-group">
                                                            {{ form_widget(formulario.data, { 'attr': {'class' : 'form-control input-mask-date'} }) }}
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.observacao)}} </label>
                                                        {{form_widget(formulario.observacao, { 'attr': {'class' : 'autosize-transition', 
                                                                                                   'style':'overflow: hidden; word-wrap: break-word; resize: horizontal;height:92px;width: 60%;'} }) }}
                                                    </div>
                                                    
                                               

                                              
                                            </form>  
                                        </div>

                                        <hr />
                                        <div class="row-fluid wizard-actions">
                                           {# <button hiden="hiden" class="btn btn-prev">
                                                <i class="icon-arrow-left"></i>
                                                Prev
                                            </button>#}

                                            <button class="btn btn-success btn-next" data-last="Finish ">
                                                Salvar
                                                <i class="icon-arrow-right icon-on-right"></i>
                                            </button>
                                        </div>
                                    </div><!-- /widget-main -->
                                </div><!-- /widget-body -->
                            </div>
                        </div>
                    </div>

                    <div id="modal-wizard" class="modal">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-footer wizard-actions">
                                     <button class="btn btn-success btn-sm btn-next" data-last="Finish ">
                                        Salvar
                                        <i class="icon-arrow-right icon-on-right"></i>
                                    </button>

                                </div>
                            </div>
                        </div>
                    </div><!-- PAGE CONTENT ENDS -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.page-content -->		


    </div><!-- /.main-container-inner -->

    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="icon-double-angle-up icon-only bigger-110"></i>
    </a>
</div><!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->

<script type="text/javascript">
    window.jQuery || document.write("<script src='{{asset('bundles/general/js/jquery-2.0.3.min.js')}}'>" + "<" + "/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

<script type="text/javascript">
    if ("ontouchend" in document)
        document.write("<script src='{{asset('bundles/general/js/jquery.mobile.custom.min.js')}}'>" + "<" + "/script>");
</script>
<script src="{{asset('bundles/general/js/bootstrap.min.js')}}"></script>
<script src="{{asset('bundles/general/js/typeahead-bs2.min.js')}}"></script>

<!-- page specific plugin scripts -->

<script src="{{asset('bundles/general/js/fuelux/fuelux.wizard.min.js')}}"></script>
<script src="{{asset('bundles/general/js/jquery.validate.min.js')}}"></script>
<script src="{{asset('bundles/general/js/additional-methods.min.js')}}"></script>
<script src="{{asset('bundles/general/js/bootbox.min.js')}}"></script>
<script src="{{asset('bundles/general/js/jquery.maskedinput.min.js')}}"></script>
<script src="{{asset('bundles/general/js/fuelux/fuelux.spinner.min.js')}}"></script>
<script src="{{asset('bundles/general/js/select2.min.js')}}"></script>

<!-- ace scripts -->

<script src="{{asset('bundles/general/js/ace-elements.min.js')}}"></script>
<script src="{{asset('bundles/general/js/ace.min.js')}}"></script>

<!-- inline scripts related to this page -->

<script type="text/javascript">
    jQuery(function ($) {

        $('[data-rel=tooltip]').tooltip();

        $(".select2").css('width', '200px').select2({allowClear: true})
                .on('change', function () {
                    $(this).closest('form').validate().element($(this));
                });


        var $validation = false;
        $('#fuelux-wizard').ace_wizard().on('change', function (e, info) {
            if (info.step == 1 && $validation) {
                if (!$('#validation-form').valid())
                    return false;
            }
        }).on('finished', function (e) {
            bootbox.dialog({
                message: "Thank you! Your information was successfully saved!",
                buttons: {
                    "success": {
                        "label": "OK",
                        "className": "btn-sm btn-primary"
                    }
                }
            });
        }).on('stepclick', function (e) {
            //return false;//prevent clicking on steps
        });


        $('#skip-validation').removeAttr('checked').on('click', function () {
            $validation = this.checked;
            if (this.checked) {
                $('#sample-form').hide();
                $('#validation-form').removeClass('hide');
            }
            else {
                $('#validation-form').addClass('hide');
                $('#sample-form').show();
            }
        });

        $('#becker_entitybundle_pacientetype_leite_materno_idade').ace_spinner({value: 0, min: 0, max: 12, step: 1, btn_up_class: 'btn-info', btn_down_class: 'btn-info'})
                .on('change', function () {
                    //alert(this.value)
                });

        $.mask.definitions['~'] = '[+-]';
        $('.input-mask-date').mask('99/99/9999');
        $('.input-mask-phone').mask('(99) 999999999');




        //documentation : http://docs.jquery.com/Plugins/Validation/validate


        $.mask.definitions['~'] = '[+-]';
        $('#phone').mask('(99) 999999999');

        jQuery.validator.addMethod("phone", function (value, element) {
            return this.optional(element) || /^\(\d{2}\) \d{9}( x\d{1,9})?$/.test(value);
        }, "Enter a valid phone number.");

        $('#validation-form').validate({
            errorElement: 'div',
            errorClass: 'help-block',
            focusInvalid: false,
            rules: {
                email: {
                    required: true,
                    email: true
                },
                name: {
                    required: true
                },
                phone: {
                    required: true,
                    phone: 'required'
                },
                comment: {
                    required: true
                },
                state: {
                    required: true
                },
                platform: {
                    required: true
                },
                subscription: {
                    required: true
                },
                gender: 'required',
                agree: 'required'
            },
            messages: {
                email: {
                    required: "Please provide a valid email.",
                    email: "Please provide a valid email."
                },
                password: {
                    required: "Please specify a password.",
                    minlength: "Please specify a secure password."
                },
                subscription: "Please choose at least one option",
                gender: "Please choose gender",
                agree: "Please accept our policy"
            },
            invalidHandler: function (event, validator) { //display error alert on form submit   
                $('.alert-danger', $('.login-form')).show();
            },
            highlight: function (e) {
                $(e).closest('.form-group').removeClass('has-info').addClass('has-error');
            },
            success: function (e) {
                $(e).closest('.form-group').removeClass('has-error').addClass('has-info');
                $(e).remove();
            },
            errorPlacement: function (error, element) {
                if (element.is(':checkbox') || element.is(':radio')) {
                    var controls = element.closest('div[class*="col-"]');
                    if (controls.find(':checkbox,:radio').length > 1)
                        controls.append(error);
                    else
                        error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
                }
                else if (element.is('.select2')) {
                    error.insertAfter(element.siblings('[class*="select2-container"]:eq(0)'));
                }
                else if (element.is('.chosen-select')) {
                    error.insertAfter(element.siblings('[class*="chosen-container"]:eq(0)'));
                }
                else
                    error.insertAfter(element.parent());
            },
            submitHandler: function (form) {
            },
            invalidHandler: function (form) {
            }
        });




        $('#modal-wizard .modal-header').ace_wizard();
        $('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');
    })
</script>

{% block javascripts_page %}
    <script src="{{ asset('bundles/general/js/_others/validaciones/geral.js')}}"></script>
{% endblock javascripts_page %} 

{% endblock %}

