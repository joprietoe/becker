{% extends 'layout.html.twig' %}

{% block page_content %} 
    <div class="page-content">        
        <div class="row">
            <div class="col-xs-12">


                <div class="navbar navbar-default" id="navbar">
                    <script type="text/javascript">
                        try {
                            ace.settings.check('navbar', 'fixed')
                        } catch (e) {
                        }
                    </script>


                    <div class="row-fluid">
                        <div class="span12">
                            <div class="widget-box">
                                <div class="widget-header widget-header-blue widget-header-flat">
                                    <h4 class="lighter">Fazer nova ficha medica</h4>											
                                </div>

                                <div class="widget-body">
                                    <div class="widget-main">
                                        <div id="fuelux-wizard" class="row-fluid" data-target="#step-container">
                                            <ul class="wizard-steps">
                                                <li data-target="#step1" class="active">
                                                    <span class="step">1</span>
                                                    <span class="title">Dados Gerais</span>
                                                </li>

                                                <li data-target="#step2">
                                                    <span class="step">2</span>
                                                    <span class="title">Gravidez e Maternidade</span>
                                                </li>

                                                <li data-target="#step3">
                                                    <span class="step">3</span>
                                                    <span class="title">Dados Responsavel</span>
                                                </li>

                                                <li data-target="#step4">
                                                    <span class="step">4</span>
                                                    <span class="title">Problemas de saude</span>
                                                </li>
                                                
                                                <li data-target="#step5">
                                                    <span class="step">5</span>
                                                    <span class="title">Cuidados</span>
                                                </li>
                                            </ul>
                                        </div>

                                        <hr />
                                        <div class="step-content row-fluid position-relative" id="step-container">
                                            <form class="form-horizontal" id="sample-form">
                                                <div class="step-pane active" id="step1">
                                                   <!-- <h4 class="lighter block green">Registre os dados principais do paciente</h4> -->

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.nome)}} </label>
                                                        {#{{form_label(formulario.nome, { 'attr': {'class' : 'col-sm-3'} }) }}#}
                                                        {{ form_widget(formulario.nome, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>

                                                    <div class="form-group">
                                                        {#{{ form_row(formulario.nome) }}#}

                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.data_nascimento)}} </label>
                                                        <div class="input-group">
                                                            {{ form_widget(formulario.data_nascimento, { 'attr': {'class' : 'form-control input-mask-date'} }) }}
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.endereco)}} </label>
                                                        {{form_widget(formulario.endereco, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.tipoSanguineo)}} </label>
                                                        {{form_widget(formulario.tipoSanguineo, { 'attr': {'class' : 'col-xs-1', 'size':2} }) }}
                                                    </div>


                                                    {#{{form_row(formulario.nProblemasSaude)}}#}
                                                    {# {{form_row(formulario.nCuidados)}}#}


                                                </div>

                                                <div class="step-pane" id="step2">
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.problemas_gravidez)}} </label>
                                                        {{form_widget(formulario.problemas_gravidez, { 'attr': {'class' : 'autosize-transition', 
                                                                                                   'style':'overflow: hidden; word-wrap: break-word; resize: horizontal;height:92px;width: 60%;'} }) }}
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.tipoParto)}} </label>
                                                        {{form_widget(formulario.tipoParto, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.problemas_posparto)}} </label>
                                                        {{form_widget(formulario.problemas_posparto, { 'attr': {'class' : 'autosize-transition', 'style':'overflow: hidden; word-wrap: break-word; resize: horizontal;height:92px;width: 60%;'} }) }}
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.depressao_puerperal)}} </label>
                                                        {{form_widget(formulario.depressao_puerperal, { 'attr': {'class' : 'autosize-transition', 'style':'overflow: hidden; word-wrap: break-word; resize: horizontal;height:92px;width: 60%;'} }) }}
                                                    </div>


                                                    <div class="form-group">
                                                        <div class="checkbox">  
                                                            <label class="col-sm-4 control-label l_artif">
                                                                {{form_widget(formulario.leite_artificial, { 'attr': {'class' : 'ace '} }) }}
                                                                <!--<input type="checkbox" class="ace" name="form-field-checkbox">-->
                                                                <span class="lbl">{{form_label(formulario.leite_artificial)}}</span>
                                                            </label>
                                                            <label class="col-sm-2 control-label l_mat_ex">
                                                                {{form_widget(formulario.leite_materno_exclusivo, { 'attr': {'class' : 'ace'} }) }}
                                                                <!--<input type="checkbox" class="ace" name="form-field-checkbox">-->
                                                                <span class="lbl">{{form_label(formulario.leite_materno_exclusivo)}}</span>
                                                            </label>
                                                        </div>
                                                    </div>                                                 


                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label">  {{form_label(formulario.leite_materno_idade)}}   </label>
                                                        <div class="ace-spinner" style="width: 70px;">
                                                            <div class="input-group">
                                                                {{form_widget(formulario.leite_materno_idade, { 'attr': {'class' : 'input-mini spinner-input form-control'} }) }} 
                                                            </div>
                                                        </div>                   
                                                    </div>
                                                </div>
                                                            
                                                <div class="step-pane" id="step3">
                                                    <h4 class="lighter block green">Registre os dados do primeiro responsavel</h4>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.responsavel.nome)}} </label>
                                                        {#{{form_label(formulario.nome, { 'attr': {'class' : 'col-sm-3'} }) }}#}
                                                        {{ form_widget(formulario.responsavel.nome, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.responsavel.ocupacao)}} </label>
                                                        {#{{form_label(formulario.nome, { 'attr': {'class' : 'col-sm-3'} }) }}#}
                                                        {{ form_widget(formulario.responsavel.ocupacao, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>                                                    
                                                    <div class="form-group tl">
                                                        <label class="col-sm-3 control-label no-padding-right" for="form-field-phone" >{{form_label(formulario.responsavel.telefContato)}} </label>

                                                        <div class="col-sm-9">
                                                            <span class="input-icon input-icon-right">
                                                                {{ form_widget(formulario.responsavel.telefContato, { 'attr': {'class' : 'input-mask-phone'} }) }}
                                                                <i class="icon-phone"></i>
                                                            </span>
                                                        </div>
                                                    </div>

                                                   <div class="form-group tl">
                                                               <label class="col-sm-3 control-label no-padding-right" for="form-field-email" > {{form_label(formulario.responsavel.email)}}                                                                   <i class="smaller-60 icon-vertical-aling-bottom tooltip-obligatorio" data-placement="right" data-rel="tooltip"></i>
                                                       </label>
             
                                                    <div class="col-sm-9">
                                                        <span class="input-icon input-icon-right">
                                                            {{form_widget(formulario.responsavel.email,  { 'attr': {'class' : 'p_email'} }) }}
                                                            <i class="icon-envelope"></i>
                                                        </span>
                                                    </div>
                                                   </div>
                                                            
                                                   <hr> 
                                                   <h4 class="lighter block green">Registre os dados do segundo responsavel</h4>
                                                   <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.responsavel.nome)}} </label>
                                                        {#{{form_label(formulario.nome, { 'attr': {'class' : 'col-sm-3'} }) }}#}
                                                        {{ form_widget(formulario.responsavel.nome1, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label"> {{form_label(formulario.responsavel.ocupacao)}} </label>
                                                        {#{{form_label(formulario.nome, { 'attr': {'class' : 'col-sm-3'} }) }}#}
                                                        {{ form_widget(formulario.responsavel.ocupacao1, { 'attr': {'class' : 'col-xs-10 col-sm-5'} }) }}
                                                    </div>                                                    
                                                    <div class="form-group tl">
                                                        <label class="col-sm-3 control-label no-padding-right" for="form-field-phone" >{{form_label(formulario.responsavel.telefContato)}} </label>

                                                        <div class="col-sm-9">
                                                            <span class="input-icon input-icon-right">
                                                                {{ form_widget(formulario.responsavel.telefContato1, { 'attr': {'class' : 'input-mask-phone'} }) }}
                                                                <i class="icon-phone"></i>
                                                            </span>
                                                        </div>
                                                    </div>

                                                   <div class="form-group tl">
                                                               <label class="col-sm-3 control-label no-padding-right" for="form-field-email" > {{form_label(formulario.responsavel.email)}}                                                                   <i class="smaller-60 icon-vertical-aling-bottom tooltip-obligatorio" data-placement="right" data-rel="tooltip"></i>
                                                       </label>
             
                                                    <div class="col-sm-9">
                                                        <span class="input-icon input-icon-right">
                                                            {{form_widget(formulario.responsavel.email1,  { 'attr': {'class' : 'p_email'} }) }}
                                                            <i class="icon-envelope"></i>
                                                        </span>
                                                    </div>
                                                   </div>         
                                                            
                                                </div>

                                                <div class="step-pane" id="step4">
                                                     
                                                   
                                                    <label for="form-field-select-4">Problemas de saude: <i class="icon-asterisk red smaller-60 icon-vertical-aling-bottom tooltip-obligatorio" data-placement="right" data-rel="tooltip" data-original-title="Campo obligatorio"></i></label>
                                                            &nbsp;&nbsp;&nbsp;{{ form_widget(formulario.problemasSaude, { 'id': 'form-field-select-4', 'attr': {'class' : 'chosen-select', 'placeholder':"Horas en la crece"}  }) }}
                                                            
                                                </div>
                                                            
                                                <div class="step-pane " id="step5">
                                                    
                                                    <div class="form-group">
                                                    <label for="form-field-select-4" class="col-sm-3 control-label">Cuidados <i class="icon-asterisk red smaller-60 icon-vertical-aling-bottom tooltip-obligatorio" data-placement="right" data-rel="tooltip" data-original-title="Campo obligatorio"></i></label>
                                                    &nbsp;&nbsp;&nbsp;{{ form_widget(formulario.nCuidados, { 'id': 'form-field-select-4-1', 'attr': {'class' : 'chosen-select'}  }) }}
                                                    </div>
                                                    
                                                        
                                                    <div class="form-group ">
                                                        <label for="form-field-select-4" class="col-sm-3 control-label">Horas en la crece </label>
                                                        <input type="text" class="col-xs-10 col-sm-5" placeholder="Horas en la crece" id="ncuidades_crece">
                                                    </div>
                                                </div>
                                            </form>  
                                        </div>

                                        <hr />
                                        <div class="row-fluid wizard-actions">
                                            <button class="btn btn-prev">
                                                <i class="icon-arrow-left"></i>
                                                Prev
                                            </button>

                                            <button class="btn btn-success btn-next" data-last="Finish ">
                                                Next
                                                <i class="icon-arrow-right icon-on-right"></i>
                                            </button>
                                        </div>
                                    </div><!-- /widget-main -->
                                </div><!-- /widget-body -->
                            </div>
                        </div>
                    </div>

                    <div id="modal-wizard" class="modal">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header" data-target="#modal-step-contents">
                                    <ul class="wizard-steps">
                                        <li data-target="#modal-step1" class="active">
                                            <span class="step">1</span>
                                            <span class="title">Validation states</span>
                                        </li>

                                        <li data-target="#modal-step2">
                                            <span class="step">2</span>
                                            <span class="title">Alerts</span>
                                        </li>

                                        <li data-target="#modal-step3">
                                            <span class="step">3</span>
                                            <span class="title">Payment Info</span>
                                        </li>

                                        <li data-target="#modal-step4">
                                            <span class="step">4</span>
                                            <span class="title">Other Info</span>
                                        </li>
                                    </ul>
                                </div>

                                <div class="modal-body step-content" id="modal-step-contents">
                                    <div class="step-pane active" id="modal-step1">
                                        <div class="center">
                                            <h4 class="blue">Step 1</h4>
                                        </div>
                                    </div>

                                    <div class="step-pane" id="modal-step2">
                                        <div class="center">
                                            <h4 class="blue">Step 2</h4>
                                        </div>
                                    </div>

                                    <div class="step-pane" id="modal-step3">
                                        <div class="center">
                                            <h4 class="blue">Step 3</h4>
                                        </div>
                                    </div>

                                    <div class="step-pane" id="modal-step4">
                                        <div class="center">
                                            <h4 class="blue">Step 4</h4>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer wizard-actions">
                                    <button class="btn btn-sm btn-prev">
                                        <i class="icon-arrow-left"></i>
                                        Prev
                                    </button>

                                    <button class="btn btn-success btn-sm btn-next" data-last="Finish ">
                                        Next
                                        <i class="icon-arrow-right icon-on-right"></i>
                                    </button>

                                    <button class="btn btn-danger btn-sm pull-left" data-dismiss="modal">
                                        <i class="icon-remove"></i>
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div><!-- PAGE CONTENT ENDS -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.page-content -->		


    </div><!-- /.main-container-inner -->

    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="icon-double-angle-up icon-only bigger-110"></i>
    </a>
</div><!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->

<script type="text/javascript">
    window.jQuery || document.write("<script src='{{asset('bundles/general/js/jquery-2.0.3.min.js')}}'>" + "<" + "/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

<script type="text/javascript">
    if ("ontouchend" in document)
        document.write("<script src='{{asset('bundles/general/js/jquery.mobile.custom.min.js')}}'>" + "<" + "/script>");
</script>
<script src="{{asset('bundles/general/js/bootstrap.min.js')}}"></script>
<script src="{{asset('bundles/general/js/typeahead-bs2.min.js')}}"></script>

<!-- page specific plugin scripts -->

<script src="{{asset('bundles/general/js/fuelux/fuelux.wizard.min.js')}}"></script>
<script src="{{asset('bundles/general/js/jquery.validate.min.js')}}"></script>
<script src="{{asset('bundles/general/js/additional-methods.min.js')}}"></script>
<script src="{{asset('bundles/general/js/bootbox.min.js')}}"></script>
<script src="{{asset('bundles/general/js/jquery.maskedinput.min.js')}}"></script>
<script src="{{asset('bundles/general/js/fuelux/fuelux.spinner.min.js')}}"></script>
<script src="{{asset('bundles/general/js/select2.min.js')}}"></script>

<!-- ace scripts -->

<script src="{{asset('bundles/general/js/ace-elements.min.js')}}"></script>
<script src="{{asset('bundles/general/js/ace.min.js')}}"></script>

<!-- inline scripts related to this page -->

<script type="text/javascript">
    jQuery(function ($) {

        $('[data-rel=tooltip]').tooltip();

        $(".select2").css('width', '200px').select2({allowClear: true})
                .on('change', function () {
                    $(this).closest('form').validate().element($(this));
                });


        var $validation = false;
        $('#fuelux-wizard').ace_wizard().on('change', function (e, info) {
            if (info.step == 1 && $validation) {
                if (!$('#validation-form').valid())
                    return false;
            }
        }).on('finished', function (e) {
            bootbox.dialog({
                message: "Thank you! Your information was successfully saved!",
                buttons: {
                    "success": {
                        "label": "OK",
                        "className": "btn-sm btn-primary"
                    }
                }
            });
        }).on('stepclick', function (e) {
            //return false;//prevent clicking on steps
        });


        $('#skip-validation').removeAttr('checked').on('click', function () {
            $validation = this.checked;
            if (this.checked) {
                $('#sample-form').hide();
                $('#validation-form').removeClass('hide');
            }
            else {
                $('#validation-form').addClass('hide');
                $('#sample-form').show();
            }
        });

        $('#becker_entitybundle_pacientetype_leite_materno_idade').ace_spinner({value: 0, min: 0, max: 12, step: 1, btn_up_class: 'btn-info', btn_down_class: 'btn-info'})
                .on('change', function () {
                    //alert(this.value)
                });

        $.mask.definitions['~'] = '[+-]';
        $('.input-mask-date').mask('99/99/9999');
        $('.input-mask-phone').mask('(99) 999999999');




        //documentation : http://docs.jquery.com/Plugins/Validation/validate


        $.mask.definitions['~'] = '[+-]';
        $('#phone').mask('(99) 999999999');

        jQuery.validator.addMethod("phone", function (value, element) {
            return this.optional(element) || /^\(\d{2}\) \d{9}( x\d{1,9})?$/.test(value);
        }, "Enter a valid phone number.");

        $('#validation-form').validate({
            errorElement: 'div',
            errorClass: 'help-block',
            focusInvalid: false,
            rules: {
                email: {
                    required: true,
                    email: true
                },
                name: {
                    required: true
                },
                phone: {
                    required: true,
                    phone: 'required'
                },
                comment: {
                    required: true
                },
                state: {
                    required: true
                },
                platform: {
                    required: true
                },
                subscription: {
                    required: true
                },
                gender: 'required',
                agree: 'required'
            },
            messages: {
                email: {
                    required: "Please provide a valid email.",
                    email: "Please provide a valid email."
                },
                password: {
                    required: "Please specify a password.",
                    minlength: "Please specify a secure password."
                },
                subscription: "Please choose at least one option",
                gender: "Please choose gender",
                agree: "Please accept our policy"
            },
            invalidHandler: function (event, validator) { //display error alert on form submit   
                $('.alert-danger', $('.login-form')).show();
            },
            highlight: function (e) {
                $(e).closest('.form-group').removeClass('has-info').addClass('has-error');
            },
            success: function (e) {
                $(e).closest('.form-group').removeClass('has-error').addClass('has-info');
                $(e).remove();
            },
            errorPlacement: function (error, element) {
                if (element.is(':checkbox') || element.is(':radio')) {
                    var controls = element.closest('div[class*="col-"]');
                    if (controls.find(':checkbox,:radio').length > 1)
                        controls.append(error);
                    else
                        error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
                }
                else if (element.is('.select2')) {
                    error.insertAfter(element.siblings('[class*="select2-container"]:eq(0)'));
                }
                else if (element.is('.chosen-select')) {
                    error.insertAfter(element.siblings('[class*="chosen-container"]:eq(0)'));
                }
                else
                    error.insertAfter(element.parent());
            },
            submitHandler: function (form) {
            },
            invalidHandler: function (form) {
            }
        });




        $('#modal-wizard .modal-header').ace_wizard();
        $('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');
    })
</script>

{% block javascripts_page %}
    <script src="{{ asset('bundles/general/js/_others/validaciones/geral.js')}}"></script>
{% endblock javascripts_page %} 

{% endblock %}
